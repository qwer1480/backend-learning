1. #### jvm了解 G1回收过程  G1在jdk几后常用    看的什么书

   G1在JDK9之后为默认的垃圾回收器，G1回收分为youngGC和MixedGC，MixedGC回收所有年轻代和回收价值高的老年代

2. #### 什么是反射  项目中有无用到  有哪些类型的代理

​		反射是类运行状态对其进行操作，访问其方法和属性，创建对象等，需要先获取这个类的字节码文件对应的class对象，其实本质就是拿到这个类的字节码文件的对象方向去获取原来类里面的各种信息

1. #### 数组和链表的区别  队列和链表的区别

   数组（arrayList）和链表（LinkedList）都是List接口的具体实现，数组是占用连续的内存，而链表是可以分散的，通过指针来寻找下一个节点；链表随机访问的效率高，为o1，链表的头插尾插方便，数组头插需要挪动元素。

   队列可以使用链表来实现，他是一种抽象的数据类型，链表是具体实现的数据结构

2. #### AQS使用场景

   可重入锁。可重入读写锁、还有阻塞队列都用到了AQS

3. #### springboot 事务

   首先事务是一组操作数据库的集合，要么同时失败要么同时成功，符合ACID原则。

   spring事务分为：

   编程式事务，声明式事务

   * 编程式：编程式事务管理使用 **TransactionTemplate** 或者直接使用底层的 PlatformTransactionManager。对于编程式事务管理，spring 推荐使用 TransactionTemplate。
   * 声明式：建立在AOP之上，通过AOP进行增强，在方法开始之前加上事务，执行完方法完再进行提交或者回滚，常用@Transactional

4. #### 什么时候事务失效

   自调用的时候事务会失效，应为没有通过代理，自调用的时候需要通过拿到代理对象在进行调用

5. #### 怎么解决自调用

   当事务在内部方法时，自调用的时候AOP的代理拦截不了，所以事务不会生效。 需要使用`AopContext.currentProxy()`获取当前代理对象：Spring提供了`AopContext.currentProxy()`方法，可以在类内部获取当前的代理对象，然后通过代理对象调用目标方法，从而确保事务生效。

6. #### 用所学的知识 解决批量导入数据库处理的时候 更快更安全（说了mysql load  想要的不是这个，答案是连接池大小  缓冲区大小）

   * 连接池使得连接复用，减少连接创建和销毁的开销

   * 缓冲区避免频繁的IO和网络通信
   * 可以禁用事务，如果需要回滚的话可以分批提交，例如每1000条提交一次事务

7. #### 上个问题用并发编程解决 

   使用线程池，因为是io密集，所以核心线程数为CPU核心数×2 ，然后将数据进行切片，每个线程对其数据子集批量插入，减少单次插入的开销。

8. #### 往数据库写10万数据 一条一条写  怎么更快（除了并发）

   插入数据时，索引维护需要额外的计算资源，先禁用索引等插入完成后重新构建索引

9. #### 德鲁伊连接池是怎么实现显示哪个sql是慢查询，一个sql执行10s 德鲁伊是怎么知道的

德鲁伊连接池在创建数据库连接的时候返回一个代理对象，通过这个代理对象拦截调用的方法，进行一些计时操作。Druid 内置了 SQL 日志记录模块，会将每次执行的 SQL 和耗时信息记录到日志中，记录SQL语句本身，执行耗时，执行次数和线程名称等。

```pascal
[2025-01-03 12:34:56] Slow SQL: 
SELECT * FROM users WHERE id = ? 
Execution Time: 10025 ms
Thread: http-nio-8080-exec-10
```

10. #### 布隆过滤器

    **布隆过滤器可以达到某样东西一定不存在或者可能存在的效果**，他要是说不存在就一定不存在，他要是说存在，可能这个数不存在。

    底层是一个很大的二进制数组和多个无偏的hash函数，（无偏hash函数就是能把元素的hash值计算的比较均匀的hash函数，能使得计算后的元素下标比较均匀的映射到位数组中。）一个key通过多个无偏hash进行运算对数组取模长得到索引，然后将数组的改为1，然后进行查询元素，这也是它最主要的功能。

    - 通过k个无偏hash函数计算得到k个hash值

    - 依次取模数组长度，得到数组索引

    - 判断索引处的值是否全部为1，如果全部为1则存在（这种存在可能是误判），如果存在一个0则必定不存在

      关于误判是因为再好的hash函数都会有hash冲突

1. #### 在内存中存很多字符串怎么节省空间

用字典树  解决公共前缀的空间